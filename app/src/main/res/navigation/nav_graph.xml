<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/nav_graph_host"
    app:startDestination="@id/splashFragment">

    <!-- Splash fragment -->
    <fragment
        android:id="@+id/splashFragment"
        android:name="com.example.bytestore.ui.splash.SplashFragment"
        android:label="Splash"
        tools:layout="@layout/fragment_splash">
        <action
            android:id="@+id/action_splashFragment_to_mainFragment"
            app:destination="@id/mainFragment"
            app:popUpTo="@id/splashFragment"
            app:popUpToInclusive="true" />
        <action
            android:id="@+id/action_splashFragment_to_productsFragment"
            app:destination="@id/productsFragment"
            app:popUpTo="@id/splashFragment"
            app:popUpToInclusive="true" />
        <action
            android:id="@+id/action_splashFragment_to_loginFragment"
            app:destination="@id/loginFragment"
            app:popUpTo="@id/loginFragment"
            app:popUpToInclusive="true" />
    </fragment>

    <!-- Main fragment -->
    <fragment
        android:id="@+id/mainFragment"
        android:name="com.example.bytestore.ui.main.MainFragment"
        android:label="Main"
        tools:layout="@layout/fragment_main">
        <action
            android:id="@+id/action_mainFragment_to_loginFragment"
            app:destination="@id/loginFragment" />
        <action
            android:id="@+id/action_mainFragment_to_registerFragment"
            app:destination="@id/registerFragment" />
        <action
            android:id="@+id/action_mainFragment_to_productsFragment"
            app:destination="@id/productsFragment" />
    </fragment>

    <!-- Login fragment -->
    <fragment
        android:id="@+id/loginFragment"
        android:name="com.example.bytestore.ui.account.LoginFragment"
        android:label="Login"
        tools:layout="@layout/fragment_login">
        <action
            android:id="@+id/action_loginFragment_to_registerFragment"
            app:destination="@id/registerFragment" />
        <action
            android:id="@+id/action_loginFragment_to_productsFragment"
            app:destination="@id/productsFragment" />
    </fragment>

    <!-- Register fragment -->
    <fragment
        android:id="@+id/registerFragment"
        android:name="com.example.bytestore.ui.account.RegisterFragment"
        android:label="Register"
        tools:layout="@layout/fragment_register">
        <action
            android:id="@+id/action_registerFragment_to_mainFragment"
            app:destination="@id/mainFragment" />
        <action
            android:id="@+id/action_registerFragment_to_loginFragment"
            app:destination="@id/loginFragment" />
        <action
            android:id="@+id/action_registerFragment_to_productsFragment"
            app:destination="@id/productsFragment" />
    </fragment>

    <!-- Profile fragment (MODIFICADO) -->
    <fragment
        android:id="@+id/profileFragment"
        android:name="com.example.bytestore.ui.account.ProfileFragment"
        android:label="Profile"
        tools:layout="@layout/fragment_profile">
        <action
            android:id="@+id/action_profileFragment_to_mainFragment"
            app:destination="@id/mainFragment" />
        <action
            android:id="@+id/action_profileFragment_to_changePasswordFragment"
            app:destination="@id/changePasswordFragment" />
        <action
            android:id="@+id/action_profileFragment_to_updateProfileFragment"
            app:destination="@id/updateProfileFragment" />
    </fragment>

    <!-- Cambiar contraseña (NUEVO) -->
    <fragment
        android:id="@+id/changePasswordFragment"
        android:name="com.example.bytestore.ui.account.ChangePasswordFragment"
        android:label="Cambiar contraseña"
        tools:layout="@layout/fragment_change_password" />

    <!-- Actualizar datos de perfil (NUEVO) -->
    <fragment
        android:id="@+id/updateProfileFragment"
        android:name="com.example.bytestore.ui.account.UpdateProfileFragment"
        android:label="Actualizar datos"
        tools:layout="@layout/fragment_update_profile" />

    <!-- Products fragment -->
    <fragment
        android:id="@+id/productsFragment"
        android:name="com.example.bytestore.ui.product.ProductsFragment"
        android:label="Products"
        tools:layout="@layout/fragment_products">
        <action
            android:id="@+id/action_productsFragment_to_productFragment"
            app:destination="@id/productFragment" />
    </fragment>

    <!-- Product fragment -->
    <fragment
        android:id="@+id/productFragment"
        android:name="com.example.bytestore.ui.product.ProductFragment"
        android:label="Product"
        tools:layout="@layout/fragment_product">
        <argument
            android:name="productId"
            app:argType="integer" />
        <action
            android:id="@+id/action_productFragment_to_productsFragment"
            app:destination="@id/productsFragment"
            app:popUpTo="@id/productFragment"
            app:popUpToInclusive="true" />
    </fragment>

    <!-- Cart fragment -->
    <fragment
        android:id="@+id/cartFragment"
        android:name="com.example.bytestore.ui.cart.CartFragment"
        android:label="Cart"
        tools:layout="@layout/fragment_cart">
        <action
            android:id="@+id/action_cart_to_checkout"
            app:destination="@id/checkoutFragment" />
    </fragment>

    <!-- Checkout fragment -->
    <fragment
        android:id="@+id/checkoutFragment"
        android:name="com.example.bytestore.ui.cart.CheckoutFragment"
        android:label="Confirmar Compra"
        tools:layout="@layout/fragment_checkout">
        <action
            android:id="@+id/action_checkout_to_products"
            app:destination="@id/productsFragment"
            app:popUpTo="@id/productsFragment"
            app:popUpToInclusive="false" />
    </fragment>

    <!-- Order fragment -->
    <fragment
        android:id="@+id/orderFragment"
        android:name="com.example.bytestore.ui.order.OrderFragment"
        android:label="Orden"
        tools:layout="@layout/fragment_order" />

    <!-- ========================================== -->
    <!--        PANEL DE ADMINISTRACIÓN             -->
    <!-- ========================================== -->

    <fragment
        android:id="@+id/adminFragment"
        android:name="com.example.bytestore.ui.admin.AdminFragment"
        android:label="Panel de administración"
        tools:layout="@layout/fragment_admin">
        <action
            android:id="@+id/action_adminFragment_to_productListAdminFragment"
            app:destination="@id/productListAdminFragment" />
        <action
            android:id="@+id/action_adminFragment_to_adminUsersFragment"
            app:destination="@id/adminUsersFragment" />
        <!-- TODO: Pendiente acciones de navegación de los otrs cruds -->
    </fragment>

    <!-- ========================================== -->
    <!--        CRUD DE PRODUCTOS                   -->
    <!-- ========================================== -->

    <!-- Listado de productos -->
    <fragment
        android:id="@+id/productListAdminFragment"
        android:name="com.example.bytestore.ui.admin.product.ProductListAdminFragment"
        android:label="Gestión de Productos"
        tools:layout="@layout/fragment_product_list_admin">
        <action
            android:id="@+id/action_productListAdminFragment_to_productRegisterFragment"
            app:destination="@id/productRegisterFragment" />
        <action
            android:id="@+id/action_productListAdminFragment_to_adminProductFragment"
            app:destination="@id/adminProductFragment" />
    </fragment>
    <!-- Registro de producto -->
    <fragment
        android:id="@+id/productRegisterFragment"
        android:name="com.example.bytestore.ui.admin.product.ProductRegisterFragment"
        android:label="Registrar Producto"
        tools:layout="@layout/fragment_product_register" />
    <!-- Edición de producto -->
    <fragment
        android:id="@+id/productEditFragment"
        android:name="com.example.bytestore.ui.admin.product.ProductEditFragment"
        android:label="Editar Producto"
        tools:layout="@layout/fragment_product_edit">
        <argument
            android:name="productId"
            app:argType="integer" />
    </fragment>
    <!-- vista del producto -->
    <fragment
        android:id="@+id/adminProductFragment"
        android:name="com.example.bytestore.ui.admin.product.AdminProductFragment"
        android:label="Información de un producto"
        tools:layout="@layout/fragment_admin_product">
        <argument
            android:name="productId"
            app:argType="integer" />
        <action
            android:id="@+id/action_productListAdminFragment_to_productEditFragment"
            app:destination="@id/productEditFragment" />
        <action
            android:id="@+id/action_adminProductFragment_to_productsListAdminFragment"
            app:destination="@id/productListAdminFragment" />
    </fragment>

    <!-- ========================================== -->
    <!--        CRUD DE USUARIOS                    -->
    <!-- ========================================== -->

    <!-- Listado de usuarios -->
    <fragment
        android:id="@+id/adminUsersFragment"
        android:name="com.example.bytestore.ui.admin.users.AdminUsersFragment"
        android:label="Listado de usuarios"
        tools:layout="@layout/fragment_admin_users">
        <action
            android:id="@+id/action_adminUsersFragment_to_adminUserFragment"
            app:destination="@id/adminUserFragment" />
        <action
            android:id="@+id/action_adminUsersFragment_to_adminUserRegisterFragment"
            app:destination="@id/adminUserRegisterFragment" />
    </fragment>
    <!-- Informacion de un usuario -->
    <fragment
        android:id="@+id/adminUserFragment"
        android:name="com.example.bytestore.ui.admin.users.AdminUserFragment"
        android:label="Gestión de usuario"
        tools:layout="@layout/fragment_admin_user">
        <argument
            android:name="userId"
            app:argType="string" />
        <action
            android:id="@+id/action_adminUserFragment_to_adminUserUpdateFragment"
            app:destination="@id/adminUserUpdateFragment" />
        <action
            android:id="@+id/action_adminUserFragment_to_adminUsersFragment"
            app:destination="@id/adminUsersFragment"
            />
    </fragment>
    <!-- Registro de usuario (crud) -->
    <fragment
        android:id="@+id/adminUserRegisterFragment"
        android:name="com.example.bytestore.ui.admin.users.AdminUserRegisterFragment"
        android:label="Registrar usuario"
        tools:layout="@layout/fragment_admin_user_register">
        <action
            android:id="@+id/action_adminUserRegisterFragment_to_adminUserFragment"
            app:destination="@id/adminUserFragment" />
    </fragment>
    <!-- actulizar usuario (crud) -->
    <fragment
        android:id="@+id/adminUserUpdateFragment"
        android:name="com.example.bytestore.ui.admin.users.AdminUserUpdateFragment"
        android:label="Editar usuario"
        tools:layout="@layout/fragment_admin_user_update">
        <argument
            android:name="userId"
            app:argType="string" />
        <action
            android:id="@+id/action_adminUserUpdateFragment_to_adminUsersFragment"
            app:destination="@id/adminUsersFragment"
            />
        <action
            android:id="@+id/action_adminUserUpdateFragment_to_profileFragment"
            app:destination="@id/profileFragment"
            />
        <action
            android:id="@+id/action_adminUserUpdateFragment_to_adminUserFragment"
            app:destination="@id/adminUserFragment"
            />
    </fragment>

    <!-- ========================================== -->
    <!--        ACCIONES GLOBALES                   -->
    <!-- ========================================== -->

    <action
        android:id="@+id/action_global_loginFragment"
        app:destination="@id/loginFragment" />

    <action
        android:id="@+id/action_global_productsFragment"
        app:destination="@id/productsFragment" />
    <!--TODO: se deberia de remover la acción global de profileFragment  -->
    <action
        android:id="@+id/action_global_profileFragment"
        app:destination="@id/profileFragment" />

    <action
        android:id="@+id/action_global_cartFragment"
        app:destination="@id/cartFragment" />

    <action
        android:id="@+id/action_global_adminFragment"
        app:destination="@id/adminFragment" />

</navigation>
